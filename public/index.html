<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Habit Tracker Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="vendor/tailwindcdn.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            primary: {
              50: '#f0fdf4', 100: '#dcfce7', 200: '#bbf7d0', 300: '#86efac',
              400: '#4ade80', 500: '#22c55e', 600: '#16a34a', 700: '#15803d',
              800: '#166534', 900: '#14532d', 950: '#052e16'
            }
          }
        }
      }
    };
  </script>
  <!-- Theme initialization & toggle helper -->
  <script>
    (function(){
      try {
        const stored = localStorage.getItem('ht_theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = stored || (prefersDark ? 'dark' : 'light');
        if(theme === 'dark') document.documentElement.classList.add('dark');
        window.toggleTheme = function(){
          const isDark = document.documentElement.classList.toggle('dark');
          localStorage.setItem('ht_theme', isDark ? 'dark' : 'light');
        };
      } catch(e) { /* ignore */ }
    })();
  </script>
  <script crossorigin src="vendor/react.production.min.js"></script>
  <script crossorigin src="vendor/react-dom.production.min.js"></script>
  <script src="vendor/babel.min.js"></script>
  
  <!-- Load Firebase config from external file -->
  <script src="firebase-config.js"></script>

  <!-- Firebase SDKs (module just to import and attach to window) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, onSnapshot, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
    
    // firebaseConfig is loaded from firebase-config.js
    const app = initializeApp(window.firebaseConfig);
    getAnalytics(app);
    window.db = getFirestore(app);
    window.auth = getAuth(app);
    window.provider = new GoogleAuthProvider();
    window.firebaseApi = { doc, onSnapshot, setDoc, signInWithPopup, signOut, onAuthStateChanged };
  </script>

  <style>
    html, body { height: 100%; font-family: 'Inter', sans-serif; }
    :root {
      --side-w: 240px;
      --day-min: 38px;
      --bar-max-h: 60px;
      --row-h: 52px;
    }
  .card { background:#fff; border:1px solid #e2e8f0; border-radius:0.75rem; padding:1rem; box-shadow:0 1px 2px rgba(0,0,0,0.04); transition:background-color .25s, border-color .25s, color .25s; }
  .dark .card { background: #0f172a; border-color: #334155; }
  @media (min-width:640px){ .card{padding:1.25rem;} }
  .soft-scroll { scroll-behavior:smooth; }
  .habit-grid-wrapper { position:relative; overflow-x:auto; }
  .fade-left::before { content:""; position:sticky; left:0; width:24px; height:100%; display:block; pointer-events:none; z-index:10; background:linear-gradient(to right, #f1f5f9, rgba(241,245,249,0)); }
    .fade-left::before {
      content: ""; position: sticky; left: 0; width: 24px; height: 100%; display: block;
      pointer-events: none; z-index: 10;
      background: linear-gradient(to right, #f1f5f9, rgba(241, 245, 249, 0));
    }
    .dark .fade-left::before {
        background: linear-gradient(to right, #0f172a, rgba(15, 23, 42, 0));
    }
  </style>
</head>
<body class="bg-slate-100 dark:bg-gray-950 text-gray-800 dark:text-gray-200">
<div id="root"></div>

<!-- Enable ES module imports inside Babel-transpiled code by adding data-type="module" -->
<!-- Core utility & component scripts (no modules, global scope) -->
<script type="text/babel" data-presets="react" src="src/utils.js"></script>
<script type="text/babel" data-presets="react" src="src/components/AddHabit.js"></script>
<script type="text/babel" data-presets="react" src="src/components/HabitScheduleButton.js"></script>
<script type="text/babel" data-presets="react" src="src/components/MiniCalendar.js"></script>
<script type="text/babel" data-presets="react" src="src/components/MonthYearPicker.js"></script>
<script type="text/babel" data-presets="react" src="src/App.js"></script>
</body>
</html>